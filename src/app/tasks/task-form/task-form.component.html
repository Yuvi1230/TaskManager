<section class="task-form-wrapper container py-4 py-md-5">
  <div class="card border-0 shadow-sm mx-auto">
    <div class="card-body p-4 p-md-5">
      <h1 class="mb-1">{{ isEditMode ? 'Edit Task' : 'Create Task' }}</h1>
      <p class="text-muted mb-4">
        {{ isEditMode ? 'Update task details and status.' : 'Add a new task to your dashboard.' }}
      </p>

      @if (errorMessage) {
        <div class="alert alert-danger">{{ errorMessage }}</div>
      }

      <form [formGroup]="taskForm" (ngSubmit)="onSubmit()" novalidate>
        <div class="mb-3">
          <label for="title" class="form-label">Task Title</label>
          <input id="title" type="text" class="form-control" formControlName="title" />
          @if (hasError('title')) {
            <small class="text-danger">Task title is required.</small>
          }
        </div>

        <div class="mb-3">
          <label for="description" class="form-label">Description</label>
          <textarea
            id="description"
            class="form-control"
            rows="4"
            formControlName="description"
            placeholder="Optional details about the task"
          ></textarea>
        </div>

        <div class="row g-3">
          <div class="col-md-6">
            <label for="dueDate" class="form-label">Due Date</label>
            <input id="dueDate" type="date" class="form-control" formControlName="dueDate" />
            @if (hasError('dueDate')) {
              <small class="text-danger">Due date is required.</small>
            }
          </div>

          <div class="col-md-6">
            <label for="status" class="form-label">Status</label>
            <select id="status" class="form-select" formControlName="status">
              @for (status of statusOptions; track status.value) {
                <option [value]="status.value">{{ status.label }}</option>
              }
            </select>
          </div>
        </div>

        <div class="d-flex flex-wrap gap-2 mt-4">
          <button type="submit" class="btn btn-primary px-4">
            {{ isEditMode ? 'Save Changes' : 'Create Task' }}
          </button>
          <button type="button" class="btn btn-outline-secondary px-4" (click)="onCancel()">Cancel</button>
          @if (isEditMode) {
            <button type="button" class="btn btn-danger ms-md-auto px-4" (click)="onDelete()">Delete</button>
          }
        </div>
      </form>
    </div>
  </div>
</section>
